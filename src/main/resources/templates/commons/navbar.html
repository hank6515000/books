<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" th:href="@{/asserts/css/bundle.min.css}">
    <!-- Plugin Css -->
    <link rel="stylesheet" th:href="@{/asserts/css/jquery.fancybox.min.css}">
    <link rel="stylesheet" th:href="@{/asserts/css/nouislider.min.css}">
    <link rel="stylesheet" th:href="@{/asserts/css/swiper.min.css}">
    <link rel="stylesheet" th:href="@{/asserts/css/cubeportfolio.min.css}">
    <link rel="stylesheet" th:href="@{/asserts/css/wow.css}">
    <link rel="stylesheet" th:href="@{/asserts/css/lineicons.css}">
    <link rel="stylesheet" th:href="@{/asserts/css/nouislider.min.css}">
    <link rel="stylesheet" th:href="@{/asserts/css/range-slider.css}">
    <!-- Slider Setting Css  -->
    <link rel="stylesheet" th:href="@{/asserts/css/settings.css}">
    <!-- Mega Menu  -->
    <link rel="stylesheet" th:href="@{/asserts/css/megamenu.css}">
    <!-- StyleSheet  -->
    <link rel="stylesheet" th:href="@{/asserts/css/style.css}">
    <!-- Custom Css  -->
    <link rel="stylesheet" th:href="@{/asserts/css/custom.css}">
</head>
<body>
<!--index nav-->
<div  class="header-area" th:fragment="topBar" >
    <div class="container">
        <div class="row upper-nav">
            <div class=" text-left nav-logo">
                <a href="" class="navbar-brand"><img th:src="@{/asserts/picture/logo.png}" alt="img"></a>
            </div>
            <div class="ml-auto nav-mega d-flex justify-content-end align-items-center">
                <header class="site-header" id="header">
                    <nav class="navbar navbar-expand-md  static-nav">
                        <div class="container position-relative megamenu-custom">
                            <a class="navbar-brand center-brand" href="">
                                <img src="/asserts/picture/logo.png" alt="logo" class="logo-scrolled">
                            </a>
                            <div class="collapse navbar-collapse">
                                <ul class="navbar-nav ml-auto">
                                    <li class="nav-item">
                                        <a class="nav-link" th:href="@{/index}">HOME</a>
                                    </li>
                                    <li class="nav-item dropdown static">
                                        <a class="nav-link dropdown-toggle active" href="javascript:void(0)" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> BOOKS </a>
                                        <ul class="dropdown-menu megamenu flexable-megamenu">
                                            <li>
                                                <div class="container">
                                                        <div class="col-lg-3 col-md-6 col-sm-12 mengmenu_border text-center">
                                                            <h5 class="dropdown-title">書籍分類</h5>
                                                            <ul th:each="bookclazz : ${session.bookClass}">
                                                                <li><i class="fa-solid fa-angle-right"></i>
                                                                    <a class="dropdown-item" th:href="@{/product/listing/bookClass/}+${bookclazz.bid}" th:text="${bookclazz.bookClass}">
                                                                    </a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                </div>
                                            </li>
                                        </ul>
                                    </li>
<!--                          未登入顯示-->
                                    <li sec:authorize="isAnonymous()" class="nav-item dropdown position-relative">
                                        <a class="nav-link dropdown-toggle" href="javascript:void(0)" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">LOGIN/REGISTER</a>
                                        <div class="dropdown-menu">
                                            <ul>
                                                <li><i class="fa-solid fa-angle-right"></i><a class="dropdown-item" th:href="@{/login}">登入</a></li>
                                                <li><i class="fa-solid fa-angle-right"></i><a class="dropdown-item" th:href="@{/register/registerValid}">註冊</a></li>
                                            </ul>
                                        </div>
                                    </li>
<!--                               登入顯示          -->
                                    <li sec:authorize="isAuthenticated()" class="nav-item dropdown position-relative">
                                        <a sec:authentication="name" class="nav-link dropdown-toggle" href="javascript:void(0)" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                           123 </a>
                                        <div class="dropdown-menu dropdown">
                                            <ul>
                                                <li><i class="fa-solid fa-angle-right"></i><a class="dropdown-item" th:href="@{/member(operate='profile')}">我的帳戶</a></li>
                                                <li><i class="fa-solid fa-angle-right"></i><a class="dropdown-item" th:href="@{/member(operate='cart')}">購買清單</a></li>
                                                <form th:action="@{/logout}" method="post"></form>
                                                <li><i class="fa-solid fa-angle-right"></i><a th:href="@{/logout}">登出</a></li>
                                            </ul>
                                        </div>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" th:href="@{/contact}">CONTACT</a>
                                    </li>

                                </ul>
                            </div>
                        </div>
                    </nav>

                    <!-- side menu -->
                    <div class="side-menu opacity-0 gradient-bg hidden">
                        <div class="inner-wrapper">
                            <span class="btn-close btn-close-no-padding" id="btn_sideNavClose"></span>
                            <nav class="side-nav w-100">
                                <ul class="navbar-nav">

                                    <li class="nav-item">
                                        <a class="nav-link" th:href="@{/index}"> HOME</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link collapsePagesSideMenu" data-toggle="collapse" href="#sideNavPages1">
                                            BOOKS <i class="fas fa-chevron-down"></i>
                                        </a>
                                        <div id="sideNavPages1" class="collapse sideNavPages">
                                            <h3 class="sub-title">書籍分類</h3>
                                            <ul th:each="bookclazz:${session.bookClass}" class="navbar-nav mt-2">
                                                <li class="nav-item"><a class="nav-link" th:href="@{/product/listing/bookClass/}+${bookclazz.bid}" th:text="${bookclazz.bookClass}"></a></li>
                                                </ul>
                                        </div>
                                    </li>

                                    <li sec:authorize="isAnonymous()" class="nav-item">
                                        <a class="nav-link collapsePagesSideMenu" data-toggle="collapse" href="#sideNavPages2">
                                           LOGIN/REGISTER <i class="fas fa-chevron-down"></i>
                                        </a>
                                        <div id="sideNavPages2" class="collapse sideNavPages">
                                            <ul class="navbar-nav">
                                                <li class="nav-item">
                                                    <a class="nav-link" th:href="@{/login}">登入</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a class="nav-link" th:href="@{/register/registerValid}">註冊</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </li>
<!--                                登入顯示    -->
                                    <li sec:authorize="isAuthenticated()" class="nav-item">
                                        <a sec:authentication="name" class="nav-link collapsePagesSideMenu" data-toggle="collapse" href="#sideNavPages3">
                                           <i class="fas fa-chevron-down"></i>
                                        </a>
                                        <div id="sideNavPages3" class="collapse sideNavPages">
                                            <ul class="navbar-nav">
                                                <li class="nav-item">
                                                    <a class="nav-link" th:href="@{/member(operate='profile')}">我的帳戶</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a class="nav-link" th:href="@{/member(operate='cart')}">購買清單</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a class="nav-link" th:href="@{/logout}">登出</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" th:href="@{/contact}">Contact</a>
                                    </li>
                                </ul>
                            </nav>
                            <div class="side-footer w-100">
                                <ul class="social-icons-simple white top40">
                                    <li><a class="facebook-bg-hvr" href="javascript:void(0)"><i class="fab fa-facebook-f"></i> </a> </li>
                                    <li><a class="twitter-bg-hvr" href="javascript:void(0)"><i class="fab fa-twitter"></i> </a> </li>
                                    <li><a class="instagram-bg-hvr" href="javascript:void(0)"><i class="fab fa-instagram"></i> </a> </li>
                                </ul>
                                <p class="whitecolor">&copy; <span id="year"></span> Product Shop. Made With Love by ThemesIndustry</p>
                            </div>
                        </div>
                    </div>
                    <div id="close_side_menu" class="tooltip"></div>
                    <!-- End side menu -->
                </header>
                <div class="nav-utility ">
                    <div class="manage-icons d-inline-block ">
                        <ul class="d-flex justify-content-center align-items-center">
                            <li class="d-inline-block ml-4">
                                <a id="add_search_box">
                                    <i class="fa-solid fa-magnifying-glass search-sidebar-hover"></i>
                                </a>
                            </li>
                            <li class="d-inline-block mini-menu-card ml-4">
                                <button class="btn position-relative rebtn ">
                                <a class="nav-link" id="add_cart_box" href="javascript:void(0)">
                                    <i class="fa-solid fa-bag-shopping"></i>
                                    <span th:if="${#lists.isEmpty(session.cart)}"></span>
                                    <span th:unless="${#lists.isEmpty(session.cart)}" th:text="${session.cart.totalCount}" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" style="color: white;">100
                                    </span>
                                </a>
                                </button>
                            </li >
                            <li class="d-inline-block ml-4">
                            <a href="javascript:void(0)" class="d-inline-block sidemenu_btn d-block" id="sidemenu_toggle">
                                <i class="fa-solid fa-bars"></i>
                            </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- other nav -->
<div  class="header-area" th:fragment="otherBar" >
    <div class="container">
        <div class="row upper-nav">
            <div class=" text-left nav-logo">
                <a href="" class="navbar-brand"><img th:src="@{/asserts/picture/logo.png}" alt="img"></a>
            </div>
            <div class="ml-auto nav-mega d-flex justify-content-end align-items-center">
                <header class="site-header" id="header">
                    <nav class="navbar navbar-expand-md  static-nav">
                        <div class="container position-relative megamenu-custom">
                            <a class="navbar-brand center-brand" th:href="@{/index}">
                                <img src="/asserts/picture/logo.png" alt="logo" class="logo-scrolled">
                            </a>
                            <div class="collapse navbar-collapse">
                                <ul class="navbar-nav ml-auto">
                                    <li class="nav-item">
                                        <a class="nav-link" th:href="@{/index}">HOME</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </nav>
                    <!-- side menu -->
                </header>
            </div>
        </div>
    </div>
</div>

<!--Cart Box-->
<div th:fragment="cartBox" class="cart-box-overlay">
    <a><i class="fas fa-times cross-sign" id="close-window1"></i></a>

    <div id="cartNav" class="container">
        <div class="row">
            <div class="search-listing row">
                <div class="col-12 mb-4">
                    <h4 class="">Shop Cart</h4>
                </div>
                <div class="col-12">
                    <div  class="text-center" th:if="${#lists.isEmpty(session.cartItemList)}">
                        <h1 th:if="${#lists.isEmpty(session.user)}">請先登入</h1>
                        <h1 th:unless="${#lists.isEmpty(session.user)}">購物車為空</h1>
                    </div>
                    <div  th:unless="${#lists.isEmpty(session.cartItemList)}"   class="listing-search-scroll">
                        <div th:each="cartItem : ${session.cartItemList}" class="media row">
                            <div class="img-holder ml-1 mr-2 col-4">
                                <a th:href="|@{/product/detail}?bid=${cartItem.bookItem.id}|"><img th:src="@{/asserts/bookimgs/}+${cartItem.bookItem.bookimg}" class="align-self-center" alt="cartitem"></a>
                            </div>
                            <div class="media-body mt-auto mb-auto col-8">
                                <h5 class="name"><a th:href="|@{/product/detail}?bid=${cartItem.bookItem.id}|" th:text="${cartItem.bookItem.bookname}"></a></h5>
                                <h5 class="name">數量:[[${cartItem.buycount}]] 小計:$[[${cartItem.sub}]]</h5>
                                <hr>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="text-center" th:if="${#lists.isEmpty(session.cartItemList)}">
            <a th:href="@{/product/listing/bookClass/0}" class=" btn green-color-yellow-gradient-btn border-radius m-3">前往購物</a>
        </div>
        <div th:unless="${#lists.isEmpty(session.cartItemList)}" class="bag-btn text-center">
            <h5>(共[[${session.cart.totalCount}]]款書籍,總數為[[${session.cart.totalBookCount}]]本)</h5>
            <h5>總金額:$[[${session.cart.total}]]</h5>
            <a th:href="@{/member(operate='cart')}" class=" btn green-color-yellow-gradient-btn border-radius m-3">前往購物車</a>
        </div>
    </div>
</div>
<!--SEARCH BOX-->
<div th:fragment="searchBox" class="search-box-overlay">
    <a><i class="fas fa-times cross-sign" id="close-window"></i></a>

    <div class="container">
        <div class="row">
            <div class="col-12 search-col">
                <form th:action="@{/product/listing/search}" method="GET">
                    <div class="input-group search-box-form">
                        <input type="text" name="keyWord" class="form-control" placeholder="Search Here" aria-label="Search Here">
                        <div class="input-group-prepend">
                            <button class="input-group-text" type="submit" id="basic-addon1"><i class="fas fa-search"></i></button>
                        </div>
                    </div>
                </form>
            </div>
            <div class="search-listing row">
                <div class="col-12 mb-4">
                    <h4 class="">熱銷TOP3</h4>
                </div>
                <div class="col-12">
                        <div th:each="book:${session.books}" class="media row">
                            <div class="img-holder ml-1 mr-2 col-4">
                                <a href="javascript:void(0)"><img th:src="@{/asserts/bookimgs/}+${book.bookimg}" class="align-self-center" alt="cartitem"></a>
                            </div>
                            <div class="media-body mt-auto mb-auto col-8">
                                <h5 class="name"><a th:href="|@{/product/detail}?bid=${book.id}|" th:text="${book.bookname}">So Sad Today</a></h5>
                                <p class="category" th:text="${book.price}">Award Winning Book</p>
                                <a class="btn black-sm-btn" th:href="|@{/product/detail}?bid=${book.id}|"><i class="fas fa-eye"></i></a>
                            </div>
                        </div>

                </div>
            </div>
        </div>
    </div>

</div>
<!--footer1 -->
<div th:fragment="footer" class="footer">
    <div class="container">
        <div class="row footer-container">
            <div class="col-sm-12 col-lg-4 f-sec1  text-center text-lg-left">
                <h4 class="high-lighted-heading">About Us</h4>
                <p>歡迎來到此網站，此為練習網站，並未有真實商品，感謝您的使用</p>
                <h4>Social Network</h4>
                <div class="s-icons">
                    <ul class="social-icons-simple">
                        <li><a href="javascript:void(0)" class="facebook-bg-hvr"><i class="fab fa-facebook-f" aria-hidden="true"></i></a></li>
                        <li><a href="javascript:void(0)" class="twitter-bg-hvr"><i class="fab fa-twitter" aria-hidden="true"></i></a> </li>
                        <li><a href="javascript:void(0)" class="instagram-bg-hvr"><i class="fab fa-instagram" aria-hidden="true"></i></a></li>
                    </ul>
                </div>
            </div>
            <div class="col-sm-12 col-lg-5 f-sec2 ">
                <div class="row">
                    <div class="col-12 col-md-6">
                        <h4 class="text-center text-md-left">Information</h4>
                        <ul class="text-center text-md-left">
                            <li><a href="javascript:void(0)">關於我們</a></li>
                            <li><a href="javascript:void(0)">配送信息</a></li>
                            <li><a href="javascript:void(0)">隱私政策</a></li>
                            <li><a href="javascript:void(0)">條款與協議</a></li>
                            <li><a href="javascript:void(0)">常問問題</a></li>
                            <li><a href="contact.html">聯繫我們</a></li>
                        </ul>
                    </div>
                    <div class="col-12 col-md-6">
                        <h4 class="text-center text-md-left">Account Info</h4>
                        <ul class="text-center text-md-left">
                            <li><a th:href="@{/login}">登入</a></li>
                            <li><a th:href="@{/register/registerValid}">註冊</a></li>
                            <li><a th:href="@{/product/listing/bookClass/0}">購物列表</a></li>
                            <li><a href="javascript:void(0)">退款政策</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12 footer_notes">
            <p class="whitecolor text-center w-100 wow fadeInDown">Copyright &copy; 2022.Company name All rights reserved.</p>
        </div>
    </div>
</div>


</body>
</html>